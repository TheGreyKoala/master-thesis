\subsection{Konkrete Syntax und deren Grammatik}
    Ein wichtiges Merkmal einer Programmiersprache ist ihre konkrete Syntax.
    Dieses Kapitel präsentiert die Syntax der \gls{wccdl} und erläutert ihre Grammatik.    
    Als Einstieg zeigt Listing \ref{listing:dlsExample}
    dazu ein Beispielhaftes {\classificationModel},
    welches in der \gls{wccdl} geschrieben wurde.

    \lstinputlisting[
        label=listing:dlsExample,
        caption=Ein {\classificationModel} in der \acrshort{wccdl},
        style=wccdl,
        inputencoding=utf8/latin1
    ]{../resources/dsl/example.wccd}

    Dieses Beispiel definiert die Seitenklasse \texttt{Service} inkl.
    ihres {\urlSelector}s und den beiden Features \texttt{pageHeading} und \texttt{images}.
    Erstere besitzt die Inhaltsklasse \texttt{PageHeading}, die ebenfalls im Beispiel definiert wird,
    und überschreibt deren Selektor mit einem individuellen {\cssSelector}.
    Das Feature \texttt{image} ist hingegen ein {\referenceFeature} vom Typ
    \texttt{Image} und überschreibt den Selektor ihrer Klasse ebenfalls.

    Die Intention der Syntax ist eine Klassendefinition
    als englischsprachigen Satz lesen zu können.
    Viele Schlüsselwörter -- im Listing blau dargestellt --
    sind deshalb beschreibend und verwenden
    den Indikativ anstelle des Imperativs.  

    Die Beschreibung der Grammatik dieser Syntax erfolgt schrittweise
    und orientiert sich wieder an den Konzepten der
    Domäne\footnote{vgl. Kapitel \ref{section:conceptClassesFeaturesSelectors}}.
    
    \paragraph{Klassen}
    Listing \ref{listing:dlsGrammarClasses} enthält die Parserregeln,
    die die allgemeine Syntax von Klassendefinitionen bestimmen.

    \lstinputlisting[
        label=listing:dlsGrammarClasses,
        caption=Klassen in der Grammatik der \acrshort{wccdl},
        inputencoding=utf8/latin1,
        style=Xtext
    ]{../resources/dsl/grammar/classes.xtext}

    Jede Klassendefinition beginnt mit einer Folge von Schlüsselwörtern,
    die festlegen, um welche Art von Klasse es sich handelt.
    Die Definition einer Seitenklassen beginnt demnach mit \texttt{page class},
    die einer Inhaltsklassen mit \texttt{content class} und die einer
    Referenzklassen mit \texttt{reference class}.
    Anschließend folgt der Name der Klasse, der eine Zeichenkette gemäß
    der Xtext-Terminal-Rule \texttt{ID} sein muss. % TODO: Referenz?
    Dem Namen kann die Definition des Selektors folgen,
    was durch die Schlüsselwortsequenz \texttt{is recognized by} geschieht.
    Jede Klasse referenziert dazu eine andere Parserregel,
    wodurch syntaktisch sichergestellt ist, dass nur semantisch korrekte Selektoren
    verwendet werden.
    Diese Regeln werden später erörtert.
    Bei Inhalts- und Referenzklassen ist der Selektor optional,
    was man im Beispiel an der Klasse \texttt{Image} sieht und
    die Grammatik durch die Kardinalität in den Regeln \texttt{ContentClass}
    und \texttt{ReferenceClass} erlaubt.
    Bei Seitenklassen ist der Selektor hingegen zwingend erforderlich.
    Im Falle von Seiten- und Inhaltsklassen kann ebenfalls optional die Deklaration von Features folgen.
    Bei Referenzen sieht die Grammatik das gemäß der Domäne nicht vor.

    \paragraph{Features}
    Die Deklaration von Features wird durch das Schlüsselwort \texttt{classifies} eingeleitet,
    dem mindestens eine Deklaration folgen muss.
    Der entsprechende Teil der Grammatik ist in Listing \ref{listing:dlsGrammarFeatures} zu sehen.

    \lstinputlisting[
        label=listing:dlsGrammarFeatures,
        caption=Features in der Grammatik der \acrshort{wccdl},
        inputencoding=utf8/latin1,
        style=Xtext
    ]{../resources/dsl/grammar/features.xtext}

    Eine Deklaration eines Features beginnt mit der Angabe des Namens,
    wozu die entsprechenden Parserregeln \texttt{ScalarFeature} und \texttt{CollectionFeature}
    wiederum auf die Regel \texttt{ID} zurückgreifen.    
    Anschließend folgt das Schlüsselwort \texttt{as}, welches der Angabe der Klasse
    des Features vorangeht.
    Soll das Feature ein {\collectionFeature} sein, folgt allerdings zunächst das
    Schlüsselwort \texttt{many} und anschließend erst der Name der Klasse.
    Dazu definieren die beiden Regeln einen Querverweis zu einer \texttt{FeatureClass},
    die ihrerseits zu den oben gezeigten Parserregeln \texttt{ContentClass} oder
    \texttt{ReferenceClass} delegiert.
    Dadurch ist sichergestellt, dass nur Inhalts- oder Referenzklassen für Features verwendet werden können.
    Der Klasse kann ein Selektor folgen,
    was bei {\scalarFeature}s durch \texttt{by} und bei
    {\collectionFeature}s durch \texttt{each by} begonnen wird.
    Der Selektor muss ein \texttt{FeatureSelector} sein,
    worunter alle Selektoren fallen, zu denen die Regeln \texttt{ContentSelector}
    und \texttt{ReferenceSelector} delegieren.
    Welche dies sind, erklärt der nächste Abschnitt.
    Es sei hier noch erwähnt, dass \texttt{FeatureSelector} nicht zu
    \texttt{ContentSelector} und \texttt{ReferenceSelector} delegieren kann,
    was semantisch korrekter wäre,
    weil dadurch eine unauflösbare Doppeldeutigkeit für den Parser entstünde.

    \paragraph{Selektoren}
    Die Syntax von Selektoren ist für Klassen und Features identisch
    und ist durch den Abschnitt der Grammatik in Listing \ref{listing:dlsGrammarSelectors} definiert.

    \lstinputlisting[
        label=listing:dlsGrammarSelectors,
        caption=Selektoren in der Grammatik der \acrshort{wccdl},
        inputencoding=utf8/latin1,
        style=Xtext
    ]{../resources/dsl/grammar/selectors.xtext}

    Die Definition eines Selektors beginnt mit einem Schlüsselwort,
    welches die Art des konkreten Selektors bestimmt.
    In der Grammatik ist das durch die Regeln
    \texttt{CssSelector}, \texttt{UrlPatternSelector} und \texttt{XPathSelector} definiert.
    Demnach beginnt ein Selektor mit \texttt{css}, \texttt{url pattern} oder \texttt{xpath}.
    Anschließend folgt in jedem Fall die Definition des Selektors,
    die durch {\flqq } und {\frqq } umschlossen wird.
    Dazwischen können beliebige Zeichen folgen, wobei die Definition mindestens ein Zeichen umfassen muss.
    Ausgenommen sind nur die Zeichen Backspace, Formfeed, Linebreak, Carriage Return und Tab.
    Anstelle der Xtext-Terminal-Rule \texttt{STRING} wird hier eine individuelle Regel verwendet.
    Die durch \texttt{STRING} definierten Zeichenketten müssen einige Zeichen codieren,
    wie den Rückwärtsschrägstrich oder die einfachen und doppelten Anführungszeichen.
    Das erschwert die Definition von Selektoren, die von diesen Zeichen gebrauch machen.
    Durch die Definition einer eigenen Regel kann die \gls{wccdl} ihren Nutzern diese Komplexität
    ersparen und im Generierungsprozess\footnote{vgl. Kapitel \ref{section:solutionDetailsDslGeneration}} behandeln.
